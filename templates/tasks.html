{% extends 'layout.html' %}

{% block title %}
    Tasks
{% endblock %}

{% block content %}
    <div class="kanban-board">
        <div class="kanban-column" data-status="todo">
            <h5>TO DO</h5>
            {% for task in todo_tasks %}
                <div class="task-card" draggable="true" data-id="{{ task.id }}" data-title="{{ task.title }}" data-description="{{ task.description }}" data-priority="{{ task.priority }}" data-status="{{ task.status }}">
                    <strong>{{ task.title }}</strong>
                    <div class="task-footer">
                        <span class="priority-icon {{ task.priority }}">
                            {% if task.priority == "high" %}
                                ▲
                            {% elif task.priority == "medium" %}
                                =
                            {% else %}
                                ▼
                            {% endif %}
                        </span>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="kanban-column" data-status="in_progress">
            <h5>IN PROGRESS</h5>
            {% for task in in_progress_tasks %}
                <div class="task-card" draggable="true" data-id="{{ task.id }}" data-title="{{ task.title }}" data-description="{{ task.description }}" data-priority="{{ task.priority }}" data-status="{{ task.status }}">
                    <strong>{{ task.title }}</strong>
                    <div class="task-footer">
                        <span class="priority-icon {{ task.priority }}">
                            {% if task.priority == "high" %}
                                ▲
                            {% elif task.priority == "medium" %}
                                =
                            {% else %}
                                ▼
                            {% endif %}
                        </span>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="kanban-column" data-status="done">
            <h5>DONE</h5>
            {% for task in done_tasks %}
                <div class="task-card {{ 'done' if task.status == 'done' }}" draggable="true" data-id="{{ task.id }}" data-title="{{ task.title }}" data-description="{{ task.description }}" data-priority="{{ task.priority }}" data-status="{{ task.status }} {{ 'done' if task.status == 'done' }}">
                    <strong>{{ task.title }}</strong>
                    <div class="task-footer">
                        <span class="priority-icon {{ task.priority }}">
                            {% if task.priority == "high" %}
                                ▲
                            {% elif task.priority == "medium" %}
                                =
                            {% else %}
                                ▼
                            {% endif %}
                        </span>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}